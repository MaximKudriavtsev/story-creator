(this["webpackJsonpstory-creator"]=this["webpackJsonpstory-creator"]||[]).push([[0],{131:function(e,t,a){e.exports=a(142)},140:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),l=a.n(o),c=a(18),i=a(62),s=a(105),u=a(17),d=a(207),m=a(71),b=a.n(m),f={storyName:"Untitled Stories",goals:"",additional:"",stories:[{id:Object(d.a)(),role:"Story Tailer",action:"make stories",purpose:"make my work more convenient",tests:[{id:Object(d.a)(),text:"Open Story Creator App"},{id:Object(d.a)(),text:"Enjoy \ud83d\ude03"}]}],isDialogOpen:!1},p=function(){return{id:Object(d.a)(),role:"",action:"",purpose:"",tests:[]}},E=function(e){return{id:Object(d.a)(),text:e}},v=function(){var e=b.a.get("state");return e?JSON.parse(e):f},g=function(e){return b.a.set("state",e,{sameSite:"None"}),e},y=(a(140),a(186)),O=a(195),h=a(108),j=a(193),C=a(102),x=a.n(C),w=a(205),k=a(103),S=a.n(k),I=a(104),N=a.n(I),D=a(89),A=a(24),T=a(203),F=a(107),R=a(90),U=a.n(R),B=a(202),G=a(187),P=a(201),W=function(e){var t=e.children,a=e.value,r=e.index,o=e.padding,l=void 0===o?3:o;return n.createElement("div",{id:r,hidden:a!==r,style:{maxHeight:"85vh",overflow:"auto"}},a===r&&n.createElement(P.a,{p:l},t))},H=function(e,t,a,n){var r=["## ".concat(t)];return a.trim()&&r.push("\n#### Goals\n\n".concat(a.trim())),r.push("\n#### User Stories\n"),e.forEach((function(e,t){r.push("".concat(t+1,". As a ").concat(e.role.trim(),", I want to be able to ").concat(e.action.trim(),", so that I can ").concat(e.purpose.trim(),"."))})),r.push("\n#### Acceptance Criteria & Tests"),r.push("\n| ID | Criteria | Test |"),r.push("| :--: | :------- | :--- |"),e.forEach((function(e,t){var a="| ".concat(t+1," | Capability to ").concat(e.action.trim(),". | ").concat(e.tests.map((function(e,t){return"".concat(t+1,". ").concat(e.text.trim(),". ")})).join("")," |");r.push(a)})),n.trim()&&r.push("\n#### Additional\n\n".concat(n.trim())),r.join("\n")},J=function(){var e=Object(c.c)((function(e){return{stories:e.stories,storyName:e.storyName,goals:e.goals,additional:e.additional}})),t=e.stories,a=e.storyName,r=e.goals,o=e.additional,l=n.useState(0),i=Object(A.a)(l,2),s=i[0],u=i[1],d=n.useCallback((function(e,t){return u(t)}),[u]),m=H(t,a,r,o);return n.createElement(F.a,null,n.createElement(y.a,{position:"static",color:"default"},n.createElement(B.a,{value:s,onChange:d,"aria-label":"simple tabs example"},n.createElement(G.a,{label:"Markdown"}),n.createElement(G.a,{label:"Preview"}))),n.createElement(W,{value:s,index:0},n.createElement(T.a,{value:m,variant:"outlined",multiline:!0,style:{width:"100%"}})),n.createElement(W,{value:s,index:1},n.createElement("div",{dangerouslySetInnerHTML:{__html:U()(m)}})))},M=a(82),K=a(9),L=a(34),_=a(59),V=a(97),Y=a.n(V),$=a(98),q=a.n($),z=a(99),Q=a.n(z),X=a(100),Z=a.n(X),ee=a(101),te=a.n(ee),ae=a(208),ne={onFocus:function(e){return e.target.select()}},re=function(e){var t=e.label,a=e.onDelete,r=e.testId,o=e.storyId,l=e.commitChanges,c=n.useState(t),i=Object(A.a)(c,2),s=i[0],u=i[1],d=n.useCallback((function(e){return u(e.target.value)}),[u]),m=n.useState(!1),b=Object(A.a)(m,2),f=b[0],p=b[1],E=n.useCallback((function(){p(!1),l({testId:r,storyId:o,value:s})}),[l,r,o,s]),v=n.useCallback((function(e){13===e.keyCode&&E()}),[E]),g=n.useCallback((function(){return p(!0)}),[]),y=n.useRef();return n.useEffect((function(){y.current.focus()}),[]),f?n.createElement(T.a,{value:s,onChange:d,autoFocus:!0,onBlur:E,inputProps:ne,onKeyDown:v}):n.createElement(ae.a,{ref:y,label:t,onDelete:a,variant:a?"default":"outlined",onClick:g,style:{marginRight:"8px"},color:a?"default":"secondary"})},oe=function(e){var t=e.row,a=Object(c.b)(),r=n.useCallback((function(e){var n=e.value;a({type:"addTest",storyId:t.id,text:n})}),[t,a]),o=n.useCallback((function(e){return a({type:"deleteTest",testId:e,storyId:t.id})}),[t,a]),l=n.useCallback((function(e){var t=e.storyId,n=e.testId,r=e.value;return a({type:"setTest",storyId:t,testId:n,value:r})}),[a]);return n.createElement("div",null,n.createElement("div",{style:{paddingBottom:"8px"}},t.tests.length?t.tests.map((function(e){return n.createElement(re,{key:e.id,testId:e.id,storyId:t.id,label:e.text,onDelete:function(){return o(e.id)},commitChanges:l})})):null,n.createElement(re,{testId:"test.id",storyId:"row.id",label:"+",commitChanges:r})))},le=function(e){return e.id},ce=function(e){return e.value?r.a.createElement(Y.a,null):r.a.createElement(q.a,null)},ie=function(e){return r.a.createElement(K.b,Object.assign({formatterComponent:ce},e))},se=Object(_.c)((function(e){var t=e.style;return r.a.createElement(w.a,{title:"Drag to reorder",enterDelay:400},r.a.createElement("span",{style:Object(u.a)(Object(u.a)({},t),{},{cursor:"move"})},r.a.createElement(Q.a,null)))})),ue=function(e){var t=e.onClick,a=Object(M.a)(e,["onClick"]);return"drag"===a.column.name?r.a.createElement(L.b.Cell,a,r.a.createElement(se,null)):r.a.createElement(L.b.Cell,Object.assign({},a,{tabIndex:0,onFocus:t,style:Object(u.a)(Object(u.a)({},a.style),{},{cursor:"pointer"})}))},de={add:function(e){var t=e.onExecute;return r.a.createElement(w.a,{title:"Create a story",enterDelay:500},r.a.createElement(j.a,{style:{textAlign:"center"},onClick:t},r.a.createElement(Z.a,{style:{color:"#E91E63"}})))},delete:function(e){var t=e.onExecute;return r.a.createElement(w.a,{title:"Delete the story",enterDelay:500},r.a.createElement(j.a,{onClick:function(){window.confirm("Are you sure you want to delete this story?")&&t()}},r.a.createElement(te.a,null)))}},me=function(e){var t=e.id,a=e.onExecute,n=de[t];return r.a.createElement(n,{onExecute:a})},be=[{name:"role",title:"Role"},{name:"action",title:"Action"},{name:"purpose",title:"Purpose"},{name:"tests",title:"Tests",getCellValue:function(e){return e.tests.length>0}},{name:"drag",title:" "}],fe=[{columnName:"tests",editingEnabled:!1}],pe=[{columnName:"role",width:150,wordWrapEnabled:!0},{columnName:"action",wordWrapEnabled:!0},{columnName:"purpose",wordWrapEnabled:!0},{columnName:"tests",width:55,align:"center"},{columnName:"drag",width:40,align:"center"}],Ee=function(){var e=Object(c.c)((function(e){return e.stories})),t=Object(c.b)(),a=Object(n.useState)([]),o=Object(A.a)(a,2),l=o[0],i=o[1],s=r.a.useCallback((function(){return t({type:"addStory"})}),[t]),u=r.a.useCallback((function(a){var n=a.oldIndex,r=a.newIndex;return t({type:"setStories",stories:Object(_.d)(e,n,r)})}),[t,e]),d=r.a.useCallback((function(e){var t=Object(_.a)(L.b.TableBody);return r.a.createElement(t,Object.assign({},e,{onSortEnd:u,useDragHandle:!0}))}),[u]);return r.a.createElement(L.a,{rows:e,columns:be,getRowId:le},r.a.createElement(ie,{for:["tests"]}),r.a.createElement(K.j,null),r.a.createElement(K.d,{onCommitChanges:function(e){e.added;var a=e.changed,n=e.deleted;a&&t({type:"changeStory",changed:a}),n&&t({type:"deleteStory",deleted:n})},editingCells:l,onEditingCellsChange:i,addedRows:[],onAddedRowsChange:s,columnExtensions:fe}),r.a.createElement(L.b,{columnExtensions:pe,cellComponent:ue,bodyComponent:d,rowComponent:function(t){var a=t.row,n=Object(M.a)(t,["row"]),o=Object(_.b)(L.b.Row);return r.a.createElement(o,Object.assign({},n,{row:a,index:e.indexOf(a)}))}}),r.a.createElement(L.d,null),r.a.createElement(L.e,{selectTextOnEditStart:!0}),r.a.createElement(L.c,{width:70,showAddCommand:!0,showDeleteCommand:!0,commandComponent:me}),r.a.createElement(L.f,{contentComponent:oe}))},ve=function(){var e=Object(c.c)((function(e){return{goals:e.goals,additional:e.additional}})),t=e.goals,a=e.additional,r=Object(c.b)(),o=n.useState(0),l=Object(A.a)(o,2),i=l[0],s=l[1],u=n.useCallback((function(e,t){return s(t)}),[s]),d=n.useCallback((function(e){return r({type:"setGoals",goals:e.target.value})}),[r]),m=n.useCallback((function(e){return r({type:"setAdditional",additional:e.target.value})}),[r]);return n.createElement(F.a,null,n.createElement(y.a,{position:"static",color:"default"},n.createElement(B.a,{value:i,onChange:u,"aria-label":"simple tabs example"},n.createElement(G.a,{label:"User Stories"}),n.createElement(G.a,{label:"Goals"}),n.createElement(G.a,{label:"Additional"}))),n.createElement(W,{value:i,index:0,padding:0},n.createElement(Ee,null)),n.createElement(W,{value:i,index:1},n.createElement(T.a,{value:t,onChange:d,autoFocus:!0,variant:"outlined",multiline:!0,style:{width:"100%"},placeholder:"Goals here..."})),n.createElement(W,{value:i,index:2},n.createElement(T.a,{value:a,onChange:m,autoFocus:!0,variant:"outlined",multiline:!0,style:{width:"100%"},placeholder:"Additional data here..."})))},ge={onFocus:function(e){return e.target.select()}},ye=function(){var e=Object(c.c)((function(e){return e.storyName})),t=Object(c.b)(),a=n.useCallback((function(e){return t({type:"setStoryName",storyName:e.target.value})}),[t]),r=n.useState(!1),o=Object(A.a)(r,2),l=o[0],i=o[1],s=n.useCallback((function(){return i(!1)}),[]),u=n.useCallback((function(e){13===e.keyCode&&s()}),[s]),d=n.useCallback((function(){return i(!0)}),[]);return l?n.createElement(T.a,{value:e,onChange:a,autoFocus:!0,onBlur:s,inputProps:ge,onKeyDown:u}):n.createElement(w.a,{title:"Click to change the stories name"},n.createElement(h.a,{onClick:d,style:{color:"#E91E63"}},e))},Oe=a(194),he=a(206),je=a(199),Ce=a(197),xe=a(198),we=a(196);function ke(){var e=Object(c.c)((function(e){return e.isDialogOpen})),t=Object(c.b)(),a=r.a.useState(""),n=Object(A.a)(a,2),o=n[0],l=n[1],i=r.a.useCallback((function(){t({type:"setDialog",value:!1}),l("")}),[t,l]),s=r.a.useCallback((function(){t(Object(u.a)({type:"setState"},function(e){var t=e.split("\n").reduce((function(e,t){return t&&e.push(t),e}),[]),a="",n=[],r=[],o=[];return t.forEach((function(e,l){if(!a&&e.indexOf("##")>-1&&(a=e.replace("##","").trim()),e.indexOf("#### Goals")>-1)for(var c=l+1;c<t.length&&t[c].indexOf("#")<0;c++)n.push(t[c].trim());if(e.indexOf("#### Additional")>-1)for(var i=l+1;i<t.length&&t[i].indexOf("#")<0;i++)r.push(t[i].trim());if(e.indexOf("#### User Stories")>-1)for(var s=l+1;s<t.length&&t[s].indexOf("#")<0;s++){var u=t[s],m=u.substring(8,u.indexOf(", I want to")),b=u.substring(u.indexOf(" I want to be able to ")+22,u.indexOf(", so that I can ")),f=u.substring(u.indexOf(", so that I can ")+16).replace(".","");o.push({id:Object(d.a)(),role:m,action:b,purpose:f,tests:[]})}if(e.indexOf("#### Acceptance Criteria & Tests")>-1)for(var p=!1,E=l+1;E<t.length&&t[E].indexOf("#")<0;E++){var v=t[E];if(v.indexOf("| 1 |")>-1&&(p=!0),p)for(var g=v.split(" | "),y=Object(A.a)(g,3),O=y[0],h=y[2],j=Number(O.substring(2))-1,C=1;h.indexOf("".concat(C,". "))>-1;C++){var x=h.indexOf("".concat(C+1,". ")),w=h.substring(h.indexOf("".concat(C,". "))+3,x>-1?x-2:h.length-3);o[j].tests.push({id:Object(d.a)(),text:w})}}})),{stories:o,name:a,goals:n.join("\n"),additional:r.join("\n")}}(o))),i(),l("")}),[t,o,i,l]),m=r.a.useCallback((function(e){return l(e.target.value)}),[l]);return r.a.createElement("div",null,r.a.createElement(he.a,{open:e,onClose:i,"aria-labelledby":"form-dialog-title"},r.a.createElement(we.a,{id:"form-dialog-title"},"Upload Stories Data"),r.a.createElement(Ce.a,null,r.a.createElement(xe.a,null,"You can upload your user stories into the App as a plain text."),r.a.createElement(T.a,{value:o,onChange:m,variant:"outlined",multiline:!0,style:{width:"100%"},placeholder:"Pass MD text here..."})),r.a.createElement(je.a,null,r.a.createElement(Oe.a,{onClick:i,color:"primary"},"Cancel"),r.a.createElement(Oe.a,{onClick:s,color:"primary"},"Upload"))))}var Se=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return{stories:e.stories,storyName:e.storyName,goals:e.goals,additional:e.additional}})),a=t.stories,n=t.storyName,o=t.goals,l=t.additional,i=r.a.useCallback((function(){var e=new Blob([H(a,n,o,l)],{type:"text/plain;charset=utf-8"});Object(D.saveAs)(e,"data.md")}),[a,n,o,l]),s=r.a.useCallback((function(){return e({type:"setDialog",value:!0})}),[e]),u=r.a.useCallback((function(){return e({type:"resetData"})}),[e]);return r.a.createElement("div",{className:"App",style:{width:"100vw",height:"100vh",backgroundColor:"#ECEFF1"}},r.a.createElement(y.a,{position:"static",color:"default"},r.a.createElement(O.a,null,r.a.createElement(h.a,{variant:"h6",style:{flexGrow:1}},"Story Creator"),r.a.createElement(ye,null),r.a.createElement(w.a,{title:"Upload a markdown file"},r.a.createElement(j.a,{onClick:s},r.a.createElement(x.a,null))),r.a.createElement(w.a,{title:"Download a markdown file"},r.a.createElement(j.a,{onClick:i},r.a.createElement(S.a,null))),r.a.createElement(w.a,{title:"Reset data"},r.a.createElement(j.a,{onClick:u},r.a.createElement(N.a,null))))),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{width:"55%",padding:"16px"}},r.a.createElement(ve,null)),r.a.createElement("div",{style:{width:"45%",padding:"16px",paddingLeft:"0px"}},r.a.createElement(J,null))),r.a.createElement(ke,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=Object(i.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"resetData":return b.a.remove("state"),f;case"setState":return g(Object(u.a)(Object(u.a)({},e),{},{storyName:t.name,stories:t.stories,goals:t.goals,additional:t.additional}));case"setGoals":return g(Object(u.a)(Object(u.a)({},e),{},{goals:t.goals}));case"setAdditional":return g(Object(u.a)(Object(u.a)({},e),{},{additional:t.additional}));case"setStoryName":return""===t.storyName.trim()?g(Object(u.a)(Object(u.a)({},e),{},{storyName:"Untitled Stories"})):g(Object(u.a)(Object(u.a)({},e),{},{storyName:t.storyName}));case"setStories":return g(Object(u.a)(Object(u.a)({},e),{},{stories:t.stories}));case"addStory":return g(Object(u.a)(Object(u.a)({},e),{},{stories:[].concat(Object(s.a)(e.stories),[p()])}));case"deleteStory":var a=new Set(t.deleted),n=e.stories.filter((function(e){return!a.has(e.id)}));return g(Object(u.a)(Object(u.a)({},e),{},{stories:n}));case"changeStory":var r=e.stories.map((function(e){return t.changed[e.id]?Object(u.a)(Object(u.a)({},e),t.changed[e.id]):e}));return g(Object(u.a)(Object(u.a)({},e),{},{stories:r}));case"addTest":var o=e.stories.reduce((function(e,a){return t.storyId===a.id&&a.tests.push(E(t.text)),e.push(a),e}),[]);return g(Object(u.a)(Object(u.a)({},e),{},{stories:o}));case"deleteTest":var l=e.stories.map((function(e){return e.id===t.storyId&&(e.tests=e.tests.filter((function(e){return e.id!==t.testId}))),e}));return g(Object(u.a)(Object(u.a)({},e),{},{stories:l}));case"setTest":var c=e.stories.map((function(e){return e.id===t.storyId&&(e.tests=e.tests.map((function(e){return e.id===t.testId&&(e.text=t.value),e}))),e}));return g(Object(u.a)(Object(u.a)({},e),{},{stories:c}));case"setDialog":return Object(u.a)(Object(u.a)({},e),{},{isDialogOpen:t.value});default:return e}}));l.a.render(r.a.createElement(c.a,{store:Ie},r.a.createElement(Se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[131,1,2]]]);
//# sourceMappingURL=main.6ca59a50.chunk.js.map